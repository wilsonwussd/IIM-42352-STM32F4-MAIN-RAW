# 振动分析系统 v3.1 发布说明

## 🎉 重大功能更新

### 新增功能：实时原始加速度数据显示

我们很高兴地宣布振动分析系统 v3.1 版本正式发布！本次更新带来了期待已久的**实时原始加速度数据显示功能**，让您能够同时观察振动的频域特性和时域波形。

## ✨ 主要新特性

### 🔄 同屏双视图界面
- **上方图表**: 频域分析 - 高分辨率振动频谱
- **下方图表**: 时域分析 - 三轴加速度实时波形
- **同一界面**: 方便对比分析，无需切换页面

### 📊 实时原始数据显示
- **三轴同步**: X/Y/Z轴加速度同时显示，不同颜色区分
- **滚动窗口**: 显示最近10秒数据，实时滚动更新
- **智能缩放**: 自动调整Y轴范围适应数据幅度
- **高效更新**: 10Hz更新频率，流畅的实时显示

### 🔧 协议扩展
- **新增命令码 0x02**: 专门用于原始加速度数据传输
- **优化传输**: 原始数据10Hz，频域数据2Hz，总带宽约2.5KB/s
- **完全兼容**: 保持对现有功能的100%向后兼容

## 🛠️ 技术改进

### STM32端
- 新增 `Send_Raw_Accel_Data()` 函数
- 扩展协议解析器支持双协议并行
- 优化数据发送频率控制，避免串口拥塞

### 上位机端
- 扩展 `ProtocolParser` 类支持原始数据解析
- 新增原始数据缓存和显示模块
- 同屏双视图界面设计，方便对比分析
- 智能内存管理，避免数据积累过多
- 窗口尺寸优化为1400×1000以容纳两个图表

## 📁 新增文件

- `test_raw_data.py`: 原始数据接收测试工具
- `run_analyzer.bat`: Windows一键启动脚本
- `UPGRADE_NOTES.md`: 详细的升级说明文档
- `RELEASE_NOTES_v3.1.md`: 本发布说明

## 🚀 使用方法

### 快速开始
```bash
# 1. 重新编译烧录STM32代码
# 2. 运行上位机
python vibration_analyzer_chinese.py
# 或使用一键启动
run_analyzer.bat

# 3. 连接设备后切换到"原始加速度数据"页面
# 4. 勾选"显示原始数据"复选框
```

### 测试新功能
```bash
# 使用测试工具验证原始数据接收
python test_raw_data.py
```

## 🎯 应用场景

### 新增应用价值
- **瞬态分析**: 观察冲击、碰撞等瞬态事件
- **振动模式识别**: 识别周期性振动模式
- **基线监测**: 监测设备静态时的噪声水平
- **综合故障诊断**: 结合频域和时域信息进行全面分析

### 原有功能保持
- 精密设备振动监测 (0.0001g级别)
- 高分辨率频谱分析 (257点，1.953Hz分辨率)
- 专业显示控制 (多种缩放模式和单位转换)

## 🔄 兼容性

- ✅ **完全向后兼容**: 所有原有功能保持不变
- ✅ **可选功能**: 原始数据显示可通过复选框控制
- ✅ **协议兼容**: 支持21点和257点频域数据格式
- ✅ **界面兼容**: 保持原有操作习惯

## 📈 性能提升

- **数据传输**: 从2KB/s提升到2.5KB/s
- **显示响应**: 原始数据10Hz实时更新
- **内存优化**: 智能缓存管理，避免内存泄漏
- **用户体验**: 分页界面设计，信息组织更清晰

## 🐛 问题修复

- 优化了协议解析的稳定性
- 改进了数据缓存的内存管理
- 增强了错误处理和异常恢复

## 📞 技术支持

如果您在使用过程中遇到任何问题，请：
1. 查看 `UPGRADE_NOTES.md` 获取详细说明
2. 使用 `test_raw_data.py` 进行功能测试
3. 检查常见问题解决方案

## 🙏 致谢

感谢所有用户的反馈和建议，特别是对实时原始数据显示功能的需求。本次更新正是基于用户的实际需求而开发的。

---

**振动分析系统 v3.1 - 让振动分析更全面、更直观！** 🚀

发布日期: 2025-09-22
版本: v3.1
Git提交: ba03784
